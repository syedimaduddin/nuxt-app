(window.webpackJsonp=window.webpackJsonp||[]).push([[38,19],{495:function(J,v,o){"use strict";o.r(v);var h=function(){var e=this,r=e.$createElement,t=e._self._c||r;return t("v-row",{attrs:{justify:"center"}},[t("v-dialog",{attrs:{persistent:"","max-width":"600px"},scopedSlots:e._u([{key:"activator",fn:function(a){var l=a.on;return[t("v-btn",e._g({staticClass:"cyan",attrs:{dark:"",fab:""}},l),[t("v-icon",{attrs:{dark:""}},[e._v(" mdi-plus ")])],1)]}}]),model:{value:e.dialog,callback:function(a){e.dialog=a},expression:"dialog"}},[e._v(" "),t("v-card",[t("v-card-title",[t("span",{staticClass:"headline"},[e._v("Add New Project")]),e._v(" "),t("v-container",{staticClass:"text-center"},[t("v-col",{staticClass:"xs-12"},[e.loading?t("v-progress-circular",{attrs:{size:70,width:7,color:"purple",indeterminate:""}}):e._e()],1)],1)],1),e._v(" "),t("v-card-text",[t("v-container",[t("v-form",{ref:"form",attrs:{"lazy-validation":""},model:{value:e.valid,callback:function(a){e.valid=a},expression:"valid"}},[t("v-text-field",{attrs:{counter:100,rules:e.nameRules,label:"Name*",required:""},model:{value:e.project.name,callback:function(a){e.$set(e.project,"name",a)},expression:"project.name"}}),e._v(" "),t("v-text-field",{attrs:{label:"Team",placeholder:"For example: Areeb Jamal, Haider Ali",required:""},model:{value:e.project.team,callback:function(a){e.$set(e.project,"team",a)},expression:"project.team"}}),e._v(" "),t("span",{staticClass:"text"},[e._v("The single dedicated image:")]),e._v(" "),t("v-btn",{staticClass:"cyan",attrs:{raised:""},on:{click:e.onPickFile}},[e._v("Upload Featured Image")]),e._v(" "),t("input",{ref:"fileInput",staticStyle:{display:"none"},attrs:{type:"file",accept:"image/*"},on:{change:e.onFilePicked}}),e._v(" "),t("br"),e._v(" "),t("img",{attrs:{src:e.imageUrl,height:"150"}}),e._v(" "),t("br"),e._v(" "),t("br"),e._v(" "),t("span",{staticClass:"text"},[e._v("Can be more than one:")]),e._v(" "),t("v-btn",{staticClass:"cyan",attrs:{raised:""},on:{click:e.onMultiFilePick}},[e._v("Upload Gallery Images")]),e._v(" "),e.uploadRemaining?t("v-progress-circular",{attrs:{indeterminate:""}}):e._e(),e._v(" "),t("input",{ref:"multiFileInput",staticStyle:{display:"none"},attrs:{type:"file",accept:"image/*",multiple:""},on:{change:e.onMultiFilePicked}}),e._v(" "),e.galleryImages.length>0?t("v-col",{staticClass:"mt-2 mb-2",attrs:{lg:"12"}},[t("v-card",[t("v-container",{attrs:{fluid:""}},[t("v-row",e._l(e.galleryImages,function(a){return t("v-col",{key:a,staticClass:"d-flex child-flex",attrs:{cols:"4"}},[t("v-card",{staticClass:"d-flex",attrs:{flat:"",tile:""}},[t("v-img",{staticClass:"grey lighten-2",attrs:{src:a,"lazy-src":a,"aspect-ratio":"1"},scopedSlots:e._u([{key:"placeholder",fn:function(){return[t("v-row",{staticClass:"fill-height ma-0",attrs:{align:"center",justify:"center"}},[t("v-progress-circular",{attrs:{indeterminate:"",color:"grey lighten-5"}})],1)]},proxy:!0}],null,!0)})],1)],1)}),1)],1)],1)],1):e._e(),e._v(" "),t("v-textarea",{attrs:{rules:e.descriptionRules,label:"Description*",placeholder:"Enter description so that others can know about this project.",required:""},model:{value:e.project.description,callback:function(a){e.$set(e.project,"description",a)},expression:"project.description"}}),e._v(" "),t("v-checkbox",{attrs:{label:"Ongoing",color:"secondary"},model:{value:e.project.ongoing,callback:function(a){e.$set(e.project,"ongoing",a)},expression:"project.ongoing"}}),e._v(" "),t("v-text-field",{attrs:{counter:11,label:"YouTube video ID",placeholder:"For example: RWldvqO4AIY"},model:{value:e.project.youtube,callback:function(a){e.$set(e.project,"youtube",a)},expression:"project.youtube"}}),e._v(" "),t("v-checkbox",{attrs:{label:"Add Documents",color:"secondary"},model:{value:e.addDocs,callback:function(a){e.addDocs=a},expression:"addDocs"}}),e._v(" "),e.addDocs?t("v-form",[t("v-container",[t("v-row",[t("v-col",{attrs:{cols:"12",md:"4"}},[t("v-text-field",{attrs:{label:"Project Report Link",required:""},model:{value:e.project_report,callback:function(a){e.project_report=a},expression:"project_report"}})],1),e._v(" "),t("v-col",{attrs:{cols:"12",md:"4"}},[t("v-text-field",{attrs:{label:"Poster Link",required:""},model:{value:e.poster,callback:function(a){e.poster=a},expression:"poster"}})],1),e._v(" "),t("v-col",{attrs:{cols:"12",md:"4"}},[t("v-text-field",{attrs:{label:"Presentation Link",required:""},model:{value:e.presentation,callback:function(a){e.presentation=a},expression:"presentation"}})],1)],1)],1)],1):e._e(),e._v(" "),t("v-btn",{attrs:{color:"orange"},on:{click:e.reset}},[e._v(" Reset Form ")])],1)],1),e._v(" "),t("small",[e._v("*indicates required field")])],1),e._v(" "),t("v-card-actions",[t("v-spacer"),e._v(" "),t("v-btn",{attrs:{color:"blue darken-1",flat:""},on:{click:function(a){e.dialog=!1+e.reset()}}},[e._v("Close")]),e._v(" "),t("v-btn",{attrs:{disabled:e.uploadRemaining||!e.valid,color:"blue darken-1",flat:""},on:{click:e.saveProject}},[e._v("Save")])],1)],1)],1)],1)},j=[],p=o(19),y=o(4),B=o(23),G=o(49),b=o(90),u=o(11),Y=o(409);function g(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);r&&(a=a.filter(function(l){return Object.getOwnPropertyDescriptor(e,l).enumerable})),t.push.apply(t,a)}return t}function m(e){for(var r=1;r<arguments.length;r++){var t=arguments[r]!=null?arguments[r]:{};r%2?g(Object(t),!0).forEach(function(a){Object(y.a)(e,a,t[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):g(Object(t)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(t,a))})}return e}var x={data:()=>({project:{name:"",team:"",description:"",youtube:"",id:"",ongoing:!1,docs:[],images:[]},dialog:!1,valid:!0,nameRules:[e=>!!e||"Name is required",e=>e&&e.length<=100||"Name must be less than 100 characters"],imageUrl:"",image:null,descriptionRules:[e=>!!e||"Description is required"],loading:!1,addDocs:!1,project_report:"",presentation:"",poster:"",uploadRemaining:!1,galleryImages:[]}),methods:m(m({},Object(b.c)("projects",["projectIsUnique"])),{},{validate(){return this.$refs.form.validate()?(this.valid=!0,!0):(this.valid=!1,!1)},reset(){this.$refs.form.reset(),this.imageUrl="",this.image=null,this.project_report="",this.presentation="",this.poster="",this.uploadRemaining=!1,this.galleryImages=[],this.project.ongoing=!1,this.loading=!1,this.addDocs=!1,this.valid=!0},getID(e){var r=e.replace(/[^a-z\d\s]+/gi,"");return r=r.replace(/\s+/g,"-").toLowerCase(),this.projectIsUnique()(r)?r:r+"-"+Math.floor(Math.random()*Math.floor(1e4))},setDocs(){this.addDocs===!1?delete this.project.docs:(this.project_report.length>0&&this.project.docs.push({name:"Project Report",url:this.project_report}),this.poster.length>0&&this.project.docs.push({name:"Poster",url:this.poster}),this.presentation.length>0&&this.project.docs.push({name:"Presentation",url:this.presentation}),this.project.docs.length===0&&delete this.project.docs)},onPickFile(){this.$refs.fileInput.click()},onMultiFilePick(){this.$refs.multiFileInput.click()},onFilePicked(e){var r=e.target.files,t=r[0].name;if(t.lastIndexOf(".")<=0)return alert("Please upload a valid file.");var a=new FileReader;a.addEventListener("load",()=>{this.imageUrl=a.result}),a.readAsDataURL(r[0]),this.image=r[0]},onMultiFilePicked(e){var r=this;return Object(p.a)(function*(){try{if(r.project.name==="")r.galleryImages=[],r.project.images=[],alert("Please enter the name of the project first!");else{r.uploadRemaining=!0;for(var t=r.getID(r.project.name),a=e.target.files,l=0;l<a.length;l++){var s=a[l].name,i=yield u.a.storage().ref("projects/"+t+"/"+s).put(a[l]),c=yield i.ref.getDownloadURL();if(r.galleryImages.push(c),r.uploadRemaining=a.length!==r.galleryImages.length,r.uploadRemaining===!1)break}}}catch(d){console.log(d)}})()},saveProject(){var e=this;return Object(p.a)(function*(){var r=e.validate(),t=e.project;try{if(r){e.loading=!0,(e.project.youtube==null||e.project.youtube.length<=0)&&delete e.project.youtube,(e.project.team==null||e.project.team.length<=0)&&delete e.project.team;var a="https://res.cloudinary.com/amuroboclub/image/upload/old/robo.jpg";e.setDocs(),e.project.id=e.getID(e.project.name),e.galleryImages&&e.galleryImages.length>0?e.project.images=e.galleryImages:delete e.project.images;var l=yield e.$firebase.database().ref("projects").push(e.project),s=l.key;if(e.imageUrl&&e.imageUrl.length>0){var i=e.image.name,c=i.slice(i.lastIndexOf(".")),d=yield u.a.storage().ref("projects/"+e.project.id+"/"+s+c).put(e.image),N=yield d.ref.getDownloadURL();yield e.$firebase.database().ref("projects").child(s).update({image:N})}else yield e.$firebase.database().ref("projects").child(s).update({image:a});e.loading=!1,e.dialog=!1,console.log("new project succesfully saved"),e.reset(),e.project=t}}catch(w){console.error(w),e.reset(),e.project=t}})()}})},C=x,V=o(98),P=o(128),I=o.n(P),O=o(122),D=o(209),n=o(406),R=o(425),F=o(426),k=o(441),$=o(427),U=o(429),A=o(151),S=o(126),T=o(203),L=o(428),M=o(424),z=o(59),E=o(437),f=Object(V.a)(C,h,j,!1,null,null,null),H=v.default=f.exports;I()(f,{VBtn:O.a,VCard:D.a,VCardActions:n.a,VCardText:n.b,VCardTitle:n.c,VCheckbox:R.a,VCol:F.a,VContainer:k.a,VDialog:$.a,VForm:U.a,VIcon:A.a,VImg:S.a,VProgressCircular:T.a,VRow:L.a,VSpacer:M.a,VTextField:z.a,VTextarea:E.a})}}]);
